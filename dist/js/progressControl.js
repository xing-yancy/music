!function(t){function e(){this.durTime=0,this.framId=null,this.startTime=0,this.lastPercent=0,this.init(),this.comSong=null}function i(t){this.obj=t,this.starPointX=0,this.starLeft=0,this.percent=0}e.prototype={init:function(){this.getDom()},getDom:function(){this.curTime=document.querySelector(".curTime"),this.totalTime=document.querySelector(".totalTime"),this.circle=document.querySelector(".circle"),this.frontBg=document.querySelector(".frontBg"),this.backBg=document.querySelector(".backBg")},musicTime:function(t){this.durTime=t;t=this.conversionTime(t);this.totalTime.innerHTML=t},conversionTime:function(t){var t=Math.round(t),e=Math.floor(t/60),t=t%60;return(e=e<10?"0"+e:e)+":"+(t=t<10?"0"+t:t)},move:function(t){var i=this;this.lastPercent=null==t?this.lastPercent:t,cancelAnimationFrame(i.frameId),this.startTime=(new Date).getTime(),function t(){var e=(new Date).getTime(),e=i.lastPercent+(e-i.startTime)/(1e3*i.durTime);i.durTime*e==i.durTime&&(i.comSong=!0),e<=1?i.update(e):cancelAnimationFrame(i.frameId),i.frameId=requestAnimationFrame(t)}()},update:function(t){var e=this.conversionTime(this.durTime*t);this.curTime.innerHTML=e,this.frontBg.style.width=100*t+"%";t=this.backBg.offsetWidth*t;this.circle.style.transform="translateX("+t+"px)"},stop:function(){cancelAnimationFrame(this.frameId);var t=(new Date).getTime();this.lastPercent+=(t-this.startTime)/(1e3*this.durTime)}},i.prototype={init:function(){var i=this;this.obj.style.transform="translateX(0)",this.obj.addEventListener("touchstart",function(t){i.starPointX=t.changedTouches[0].pageX,i.starLeft=parseFloat(this.style.transform.split("(")[1]),i.start&&i.start()}),this.obj.addEventListener("touchmove",function(t){i.disPointX=t.changedTouches[0].pageX-i.starPointX;var e=i.starLeft+i.disPointX;e<0?e=0:e>this.offsetParent.offsetWidth&&(e=this.offsetParent.offsetWidth),this.style.transform="translate("+e+"px)",i.percent=e/this.offsetParent.offsetWidth,i.move&&i.move(i.percent),t.preventDefault()}),this.obj.addEventListener("touchend",function(){i.end&&i.end(i.percent)})}},t.propgress={progressMove:e,drag:i}}(window.player||window.player());